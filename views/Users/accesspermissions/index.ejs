<!DOCTYPE html>
<html class="loading <%= use.theme == 'sun' ? 'dark-layout' : '' %>" lang="en" data-textdirection="ltr">

<!-- BEGIN: Head-->

<head>
  <title><%= process.env.WEBSITENAME %> - Accesspermissions</title>
  <%- include('../../Layout/tagHead') %>

  <style>
    @media (max-width: 767px) {
      /* .table-responsive .dropdown-menu {
        position: static !important;
      } */
    }

    @media (min-width: 1000px) {
      .table-responsive {
        overflow: visible !important;
      }
    }
  </style>
</head>
<!-- END: Head-->
<!-- BEGIN: Body-->

<body class="horizontal-layout horizontal-menu navbar-floating footer-static" data-open="hover" data-menu="horizontal-menu" data-col>

  <!-- BEGIN: Header-->


  <nav class="header-navbar navbar-expand-lg navbar navbar-fixed align-items-center navbar-shadow navbar-brand-center" data-nav="brand-center">
    <%- include('../../Layout/appheader', { Menuname: "_accesspermissions" }) %>
  </nav>
  <!-- END: Header-->

  <!-- BEGIN: Main Menu-->
  <%- include('../../Layout/appmenu', { Menuname: "_accesspermissions" }) %>
  <!-- END: Main Menu-->

  <!-- BEGIN: Content-->
  <div class="app-content content">
    <div class="content-overlay"></div>
    <div class="header-navbar-shadow"></div>
    <div class="content-wrapper">

      <%- include('../../Layout/appbreadcrumb', { Menuname: "_accesspermissions" }) %>


      <div class="content-body">

        <!-- Striped rows start -->
        <div class="row">
          <div class="col-12">
            <div class="card">

              <div class="card-header border-bottom py-1">
                <h4 class="card-title" data-language="_accesspermissions">
                  <!-- รายชื่อเมนู -->
                </h4>
              </div>


              <div class="card-body pt-1">
                <div class="table-responsive">
                  <table id="accesspermissionsTable" class="table table-striped table-hover">
                    <thead>
                      <tr>
                        <th hidden>ID</th>
                        <th style="width: 13%; text-align: center;" data-language="_permission_id">
                          <!-- รหัสโมดูล -->
                        </th>
                        <th style="width: 24%;" data-language="_permission_name">
                          <!-- ชื่อสิทธิ์เมนู -->
                        </th>
                        <!-- <th style="width: 10%; text-align: center;">ชื่อโมดูล</th> -->
                        <th style="width: 15%;" data-language="_permission_controller">
                          <!-- คอนโทรลเลอร์ -->
                        </th>
                        <th style="width: 10%; text-align: center;" class="no-search" data-language="_permission_allowmanagement">
                          <!-- สิทธิ์การเข้าถึง -->
                        </th>
                        <th style="width: 18%; text-align: center;" class="no-search" data-language="_permission_company_only">
                          <!-- เฉพาะบริษัท -->
                        </th>
                        <th style="width: 24%; text-align: center;" class="no-search" data-language="_permission_createdat">
                          <!-- วันที่สร้าง -->
                        </th>
                        <th style="width: 5%; text-align: center;" class="no-search" data-language="_operations">
                          <!-- ดำเนินการ -->
                        </th>
                      </tr>
                    </thead>
                    <tbody>

                      <!-- prmissions -->
                      <% prmissions.forEach((prmission, index) => { %>
                      <tr>
                        <td hidden><%= index %></td>
                        <td style="text-align: center; width: 10%;">
                          <img data-bs-toggle="tooltip" title="<%= (prmission?.prefix == 'F'? 'FormModule':'ReportModule') %>" class="me-75" alt="logoCompany" height="20" width="20" onerror="this.src='/app-assets/images/icons/unknown.png';" src="/app-assets/images/icons/<%= (prmission?.prefix == 'F'? 'googledocs.svg':'report.svg') %>" />
                          <%= (prmission?.prefix == 'F'? 'F':'R') %>-<%= prmission?.Permissions_id %>
                        </td>
                        <td style="text-align: left; width: 15%;">
                          <span class="fw-bold" id="table_name_<%= encryptText(prmission?.Permissions_id?.toString()) %>"><%= prmission?.name %></span>
                        </td>
                        <td style="text-align: left;" id="table_controller_<%= encryptText(prmission?.Permissions_id?.toString()) %>">
                          <%= prmission?.controller %>
                        </td>
                        <td>
                          <div class="d-flex">
                            <div class="form-check me-3 me-lg-1">
                              <input disabled class="form-check-input checked-opacity" type="checkbox" id="table_read_<%= encryptText(prmission?.Permissions_id?.toString()) %>" <%= (prmission?.read? 'checked':'disabled') %> />
                              <label class="form-check-label" for="table_read_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_read">
                                <!-- อ่าน -->
                              </label>
                            </div>
                            <div class="form-check me-3 me-lg-1">
                              <input disabled class="form-check-input checked-opacity" type="checkbox" id="table_update_<%= encryptText(prmission?.Permissions_id?.toString()) %>" <%= (prmission?.update? 'checked':'disabled') %> />
                              <label class="form-check-label" for="table_update_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_update">
                                <!-- แก้ไข -->
                              </label>
                            </div>
                            <div class="form-check me-3 me-lg-1">
                              <input disabled class="form-check-input checked-opacity" type="checkbox" id="table_create_<%= encryptText(prmission?.Permissions_id?.toString()) %>" <%= (prmission?.create? 'checked':'disabled') %> />
                              <label class="form-check-label" for="table_create_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_create">
                                <!-- สร้าง -->
                              </label>
                            </div>
                            <div class="form-check me-3 me-lg-1">
                              <input disabled class="form-check-input checked-opacity" type="checkbox" id="table_delete_<%= encryptText(prmission?.Permissions_id?.toString()) %>" <%= (prmission?.delete? 'checked':'disabled') %> />
                              <label class="form-check-label" for="table_delete_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_delete">
                                <!-- ลบ -->
                              </label>
                            </div>
                          </div>
                        </td>
                        <td style="text-align: center;">
                          <div class="d-flex justify-content-center">
                            <div class="form-check me-3 me-lg-1">
                              <input disabled class="form-check-input checked-opacity" type="checkbox" id="table_companyonly_<%= encryptText(prmission?.Permissions_id?.toString()) %>" <%= (prmission?.companyonly? 'checked':'disabled') %> />
                            </div>
                          </div>
                        </td>
                        <td style="text-align: center;">
                          <%= formatDateTimeThai(prmission?.created_at, true) %>
                        </td>
                        <td style="text-align: center;">
                          <div class="btn-group">
                            <button type="button" class="btn btn-outline-primary hide-arrow dropdown-toggle btn-sm" data-bs-toggle="dropdown" aria-expanded="false">
                              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                              </svg>
                              <span data-language="_operations">
                                <!-- การดำเนินการ -->
                              </span>
                            </button>
                            <div class="dropdown-menu menu-option py-25">
                              <a type="button" data-bs-toggle="modal" data-bs-target="#editAccesspermissionModal_<%= encryptText(prmission?.Permissions_id?.toString()) %>" class="dropdown-item" href="#" onclick="event.preventDefault();">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit">
                                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                                <span data-language="_edit_information">
                                  <!-- แก้ไขข้อมูล -->
                                </span>
                              </a>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <% }); %>

                    </tbody>

                    <tfoot>
                      <tr>
                        <th hidden></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                      </tr>
                    </tfoot>
                  </table>
                </div>
              </div>

            </div>
          </div>
        </div>
        <!-- Striped rows end -->
      </div>

    </div>
  </div>

  <% prmissions.forEach(prmission => { %>
  <!-- Edit AccessPermissions Modal -->
  <div class="modal fade text-start" id="editAccesspermissionModal_<%= encryptText(prmission?.Permissions_id?.toString()) %>" tabindex="-1" aria-labelledby="ModalLabel17" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="ModalLabel17" data-language="_change_permissionname">
            <!-- เปลี่ยนชื่อเมนู -->
          </h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <form onsubmit="return false" class="validate-form" id="<%= encryptText(prmission?.Permissions_id?.toString()) %>">

          <input type="hidden" class="permissionsId" value="<%= encryptText(prmission?.Permissions_id?.toString()) %>">
          <div class="modal-body">

            <div class="row">
              <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 mb-1">
                <label class="form-label" for="prefix_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_permission_prefix">
                  <!-- ประเภทโมดูล -->
                </label>
                <div class="input-group input-group-merge">
                  <select class="form-select" id="prefix_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="new_prefix" disabled>
                    <option <%= (prmission?.prefix == 'F'? 'selected':'') %>>[F] Form</option>
                    <option <%= (prmission?.prefix == 'R'? 'selected':'') %>>[R] Report</option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 mb-1">
                <label class="form-label" for="permissionId_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_permission_id">
                  <!-- รหัสโมดูล -->
                </label>
                <div class="input-group input-group-merge">
                  <input type="text" value="<%= prmission?.Permissions_id %>" class="form-control" id="permissionId_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="new_permissionId" data-language-placeholder="_enter_companyname" disabled />
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 mb-1">
                <label class="form-label" for="new_controller_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_permission_controller">
                  <!-- คอนโทรลเลอร์ -->
                </label>
                <div class="input-group input-group-merge">
                  <input type="text" value="<%= prmission?.controller %>" class="form-control" id="new_controller_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="new_controller" autocomplete="off" data-language-placeholder="_enter_new_password" />
                </div>
              </div>
              <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 mb-1">
                <label class="form-label" for="new_name_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_permission_name">
                  <!-- ชื่อสิทธิ์เมนู -->
                </label>
                <div class="input-group input-group-merge">
                  <input type="text" value="<%= prmission?.name %>" class="form-control" id="new_name_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="name_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language-placeholder="_enter_username" />
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-12 col-sm-12 mb-1">
                <label class="form-label" data-language="_permission_allowmanagement">
                  <!-- สิทธิ์การเข้าถึง -->
                </label>
                <div class="d-flex">
                  <div class="form-check me-3 me-lg-3">
                    <input value="<%= prmission?.read %>" class="form-check-input pointer" type="checkbox" id="new_read_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="new_read" <%= (prmission?.read? 'checked':'') %> />
                    <label class="form-check-label" for="new_read_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_read">
                      <!-- อ่าน -->
                    </label>
                  </div>
                  <div class="form-check me-3 me-lg-3">
                    <input value="<%= prmission?.update %>" class="form-check-input pointer" type="checkbox" id="new_update_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="new_update" <%= (prmission?.update? 'checked':'') %> />
                    <label class="form-check-label" for="new_update_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_update">
                      <!-- แก้ไข -->
                    </label>
                  </div>
                  <div class="form-check me-3 me-lg-3">
                    <input value="<%= prmission?.create %>" class="form-check-input pointer" type="checkbox" id="new_create_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="new_create" <%= (prmission?.create? 'checked':'') %> />
                    <label class="form-check-label" for="new_create_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_create">
                      <!-- สร้าง -->
                    </label>
                  </div>
                  <div class="form-check me-3 me-lg-3">
                    <input value="<%= prmission?.delete %>" class="form-check-input pointer" type="checkbox" id="new_delete_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="new_delete" <%= (prmission?.delete? 'checked':'') %> />
                    <label class="form-check-label" for="new_delete_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_delete">
                      <!-- ลบ -->
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-12 col-sm-12">
                <div class="alert alert-danger mt-1 mb-0 alert-validation-msg" role="alert">
                  <div class="alert-body d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-info me-50">
                      <circle cx="12" cy="12" r="10"></circle>
                      <line x1="12" y1="16" x2="12" y2="12"></line>
                      <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    <span><strong>คำเตือน</strong> การแก้ไขจะทำให้สิทธิ์ที่ผูกใว้กับกลุ่มสมาชิก จะถูกลบทั้งหมด</span>
                  </div>
                </div>
              </div>
            </div>

          </div>

          <div class="modal-footer d-flex justify-content-between">

            <div class="form-check">
              <% if (prmission?.Permissions_id < 300) { %>
              <input class="form-check-input" type="checkbox" value="false" id="new_companyonly_<%= encryptText(prmission?.Permissions_id?.toString()) %>" name="new_companyonly" <%= (prmission?.companyonly? 'checked':'') %>>
              <label class="form-check-label" for="new_companyonly_<%= encryptText(prmission?.Permissions_id?.toString()) %>" data-language="_permission_company_only">
                <!-- เฉพาะบริษัท -->
              </label>
              <% } %>
            </div>

            <div>
              <button type="submit" id="btnDisabled_<%= encryptText(prmission?.Permissions_id?.toString()) %>" class="btn btn-primary me-1">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-save">
                  <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                  <polyline points="17 21 17 13 7 13 7 21"></polyline>
                  <polyline points="7 3 7 8 15 8"></polyline>
                </svg>
                <span data-language="_save_changes"></span>
                <!-- Save changes -->
              </button>
              <button type="button" class="btn btn-outline-danger waves-effect waves-float waves-light" data-bs-dismiss="modal">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                <span data-language="_discard"></span>
                <!-- ยกเลิก -->
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!--/ Edit AccessPermissions Modal -->
  <% }); %>

  <!-- END: Content-->
  <!-- <div class="sidenav-overlay"></div> -->
  <!-- <div class="drag-target"></div> -->
  <!-- BEGIN: Footer-->
  <%- include('../../Layout/appfooter') %>

  <%- include('../../Layout/scriptFooter') %>

  <!-- BEGIN: Page JS-->
  <script src="../app-scriptPage/accesspermissions/page-user-accesspermissions.index.js"></script>
  <script src="../app-validateForm/accesspermissions/page-user-accesspermissions.index.js"></script>
  <!-- END: Page JS-->

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      tooltipTriggerList.map(function(tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    });
  </script>

</body>
<!-- END: Body-->

</html>